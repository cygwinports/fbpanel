--- origsrc/fbpanel-5.6/Makefile.in	2009-01-31 18:34:18.000000000 -0600
+++ src/fbpanel-5.6/Makefile.in	2009-07-05 00:33:05.594732900 -0500
@@ -1,5 +1,5 @@
 include %%topdir%%/config.mk
 
-SUBDIRS = plugins panel data
+SUBDIRS = panel plugins data
 
 include %%topdir%%/rules.mk
--- origsrc/fbpanel-5.6/panel/Makefile.in	2009-06-27 14:18:12.000000000 -0500
+++ src/fbpanel-5.6/panel/Makefile.in	2009-07-05 00:35:35.623040300 -0500
@@ -2,7 +2,7 @@ include %%topdir%%/config.mk
 
 SRCS = panel.c misc.c plugin.c gtkbar.c bg.c gtkbgbox.c ev.c configurator.c 
 BINTARGET = fbpanel
-LDFLAGS += $(GMODULE_LIBS)
+LDFLAGS += $(GMODULE_LIBS) -Wl,--export-all-symbols,--out-implib,libfbpanel.a
 
 ifeq (enabled,$(STATIC_BUILD))
 OBJS += $(wildcard $(TOPDIR)/plugins/*/*.o)
--- origsrc/fbpanel-5.6/rules.mk	2009-07-03 13:09:22.000000000 -0500
+++ src/fbpanel-5.6/rules.mk	2009-07-05 00:35:58.057133000 -0500
@@ -107,7 +107,7 @@ endif
 all : $(LIBTARGET)
 $(LIBTARGET) : $(OBJS)
 	$(call summary,LD  ,$@)
-	$Q$(CC) $(OBJS) -o $@ $(LDFLAGS) -shared
+	$Q$(CC) $(OBJS) -o $@ $(LDFLAGS) $(TOPDIR)/panel/libfbpanel.a -shared
 
 CLEANLIST += $(LIBTARGET)
 endif
